[
  {
    "objectID": "renabap.html",
    "href": "renabap.html",
    "title": "3 RENABAP",
    "section": "",
    "text": "3.1 Resumen ejecutivo\nEste an谩lisis utiliza el conjunto de datos global de huellas de edificios para mejorar las estimaciones de exposici贸n a peligros de inundaci贸n en asentamientos informales en La Plata.\n锔 Los datos del RENABAP subestiman dram谩ticamente la poblaci贸n en asentamientos informales, con aproximadamente 41,575 viviendas faltantes no contabilizadas en las estad铆sticas oficiales. Esto representa entre 125,000 y 208,000 personas no contabilizadas, lo cual es fundamental para comprender la verdadera magnitud de la exposici贸n a inundaciones en La Plata.\n Encontramos que 17,014 edificiones est谩n expuestas a peligros de inundaci贸n (23.9% del total), con 6,112 en zonas de peligro alto y 10,902 en peligro medio. Villa Montoro presenta la mayor exposici贸n con 669 edificios en peligro alto (21.7% del barrio), seguido por La Esperanza con 440 edificiones (16.3%), Las Palmeras con 417 (33.7%), Toba con 335 (67.7%), y La Isla con 320 edificiones (96.4%). A nivel de cuencas, la Cuenca Arroyo del Gato concentra la mayor exposici贸n con 7,943 edificios expuestos.\n El an谩lisis de diferentes per铆odos de retorno para la Cuenca Maldonado revela que la elecci贸n del per铆odo genera diferencias significativas en las estimaciones de exposici贸n, siendo crucial para determinar qu茅 谩reas priorizar para la reubicaci贸n de residentes en asentamientos informales.",
    "crumbs": [
      "<span class='chapter-number'>3</span> <span class='chapter-title'>RENABAP</span>"
    ]
  },
  {
    "objectID": "renabap.html#resumen-ejecutivo",
    "href": "renabap.html#resumen-ejecutivo",
    "title": "3 RENABAP",
    "section": "",
    "text": " Click aqu铆 para descargar los datos de exposici贸n de edificios a nivel de barrio\n Click aqu铆 para descargar los datos de exposici贸n de edificios a nivel de cuenca y eje",
    "crumbs": [
      "<span class='chapter-number'>3</span> <span class='chapter-title'>RENABAP</span>"
    ]
  },
  {
    "objectID": "renabap.html#objetivos",
    "href": "renabap.html#objetivos",
    "title": "3 RENABAP",
    "section": "3.2 Objetivos",
    "text": "3.2 Objetivos\nEste proyecto tiene como objetivo principal mejorar el mapeo de la exposici贸n a peligros de inundaci贸n en asentamientos informales del Partido de La Plata. El an谩lisis se realiza espec铆ficamente con el prop贸sito de preparar un plan para la reubicaci贸n gradual de las estructuras, viviendas o familias en mayor riesgo dentro de estos asentamientos informales hacia lugares m谩s seguros.\nEl trabajo busca cuantificar la exposici贸n a peligros de inundaci贸n en asentamientos informales como herramienta para la toma de decisiones a nivel municipal, desarrollando metodolog铆as de an谩lisis espacial que permitan identificar las 谩reas y poblaciones de mayor riesgo. Asimismo, se propone proporcionar informaci贸n t茅cnica que ayude a mitigar el riesgo de inundaci贸n en asentamientos informales y obtener estimaciones m谩s precisas de la poblaci贸n expuesta utilizando datos de huellas de edificios, complementando las limitaciones significativas de los datos del RENABAP que se analizan en detalle en este estudio.\n\n\nMostrar c贸digo\nimport matplotlib.pyplot as plt\n\n\nfrom io import StringIO\nfrom shapely.geometry import box\nimport geopandas as gpd\nimport requests\nimport pandas as pd\nimport os\n\n\nimport numpy as np\nimport itables\nfrom itables import show\nfrom IPython.display import HTML, display\n\nfrom matplotlib_map_utils import north_arrow, scale_bar, ScaleBar\n\nfrom matplotlib.patches import Patch\n\n\nfrom shapely.ops import unary_union\nimport contextily as cx\n\n\nfrom utils.utils import (\n    add_scale_bar_and_north_arrow,\n    add_basemap,\n    add_boundary_outline,\n    create_consistent_map,\n    wfs_to_gdf,\n    fetch_buildings,\n)\n\n# Configure Argentine Spanish for itables\ntry:\n    spanish_url = \"https://cdn.datatables.net/plug-ins/2.3.3/i18n/es-AR.json\"\n    response = requests.get(spanish_url)\n    response.raise_for_status()\n    spanish_config = response.json()\n    itables.options.language = spanish_config\nexcept Exception:\n    pass\n\n# Configure smaller font size for all itables\ncss = \"\"\"\n.dt-container {\n  font-size: small;\n}\n\"\"\"\ndisplay(HTML(f\"&lt;style&gt;{css}&lt;/style&gt;\"))\n\n\n# Helper function to round numeric columns for display\ndef round_numeric_columns(df, decimals=0):\n    \"\"\"Round all numeric columns in a DataFrame to specified decimal places.\"\"\"\n    df_display = df.copy()\n    numeric_columns = df_display.select_dtypes(include=[np.number]).columns\n    df_display[numeric_columns] = df_display[numeric_columns].round(decimals)\n    return df_display\n\ndef create_consistent_map(title, crs, boundary_gdf=None, bounds=None):\n    \"\"\"Create a map with consistent styling and basemap.\"\"\"\n    fig, ax = setup_base_map(crs, bounds=bounds, boundary_gdf=boundary_gdf)\n\n    add_basemap(ax)\n\n    add_scale_bar_and_north_arrow(ax)\n\n    add_boundary_outline(ax, boundary_gdf)\n\n    ax.set_title(title, fontsize=16, fontweight=\"bold\", pad=20)\n\n    ax.set_axis_off()\n\n    return fig, ax\n\ndef setup_base_map(\n    use_crs, figsize=None, bounds=None, boundary_gdf=None, padding_x=None, padding_y=None\n):\n    \"\"\"Create figure and set up basic map boundaries with padding.\"\"\"\n    if figsize is None:\n        figsize = DEFAULT_FIGSIZE\n    if padding_x is None:\n        padding_x = MAP_PADDING\n    if padding_y is None:\n        padding_y = MAP_PADDING\n\n    if bounds is None and boundary_gdf is not None:\n        bounds = boundary_gdf.total_bounds\n\n    # Convert bounds to Web Mercator for basemap compatibility\n    if bounds is not None:\n        # Create a temporary GeoDataFrame with the bounds to reproject\n        temp_bounds = gpd.GeoDataFrame(\n            geometry=[box(bounds[0], bounds[1], bounds[2], bounds[3])], crs=use_crs\n        )\n        bounds_3857 = temp_bounds.to_crs(WEB_MERCATOR_CRS).total_bounds\n    else:\n        bounds_3857 = bounds\n\n    fig, ax = plt.subplots(figsize=figsize)\n    ax.set_xlim(bounds_3857[0] - padding_x, bounds_3857[2] + padding_x)\n    ax.set_ylim(bounds_3857[1] - padding_y, bounds_3857[3] + padding_y)\n    return fig, ax\n\n# =============================================================================\n# CONSTANTES Y CONFIGURACIN\n# =============================================================================\n\nUSE_CRS = \"EPSG:5349\"  # POSGAR 2007 / Argentina 4\nWEB_MERCATOR_CRS = \"EPSG:3857\"  # visualization\nWGS84_CRS = \"EPSG:4326\"  # for API calls\n\nBASE_PATH = \"/home/nissim/Documents/dev/fulbright/ciut-riesgo\"\nDATA_PATH = f\"{BASE_PATH}/notebooks/data\"\nPELIGRO_PATH = f\"{DATA_PATH}/la_plata_pelig_2023_datos_originales.geojson\"\nPARTIDOS_PATH = f\"{DATA_PATH}/pba_partidos.geojson\"\nCUENCAS_PATH = f\"{BASE_PATH}/notebooks/cuencas_buenos_aires.geojson\"\nBUILDINGS_PATH = f\"{BASE_PATH}/notebooks/buildings_filtered.parquet\"\n\nRENABAP_URL = (\n    \"https://www.argentina.gob.ar/sites/default/files/renabap-2023-12-06.geojson\"\n)\nPARTIDOS_WFS_URL = \"https://geo.arba.gov.ar/geoserver/idera/wfs\"\nCUENCAS_API_URL = \"https://services1.arcgis.com/atxllciEI8CHWvwW/ArcGIS/rest/services/Cuencas_BuenosAires_2023/FeatureServer/0/query\"\n\n\n# Basic visualization settings (only for repeated values)\nDEFAULT_FIGSIZE = (12, 10)\nMAP_PADDING = 500\nPLASMA_CMAP = plt.cm.plasma\n\n# Color schemes for visualization\nPELIGROSIDAD_COLORS = {\n    \"alta\": PLASMA_CMAP(0.5),\n    \"media\": PLASMA_CMAP(0.8),\n}\n\n\nPELIGROSIDAD_LEGEND = [\n    Patch(facecolor=color, label=label) for label, color in PELIGROSIDAD_COLORS.items()\n]\n\n\n# Eje mapping for watershed analysis\nEJE_MAPPING = {\n    \"noreste\": [\"Area de Ba帽ados\", \"Cuenca Arroyo Rodriguez-Don Carlos\"],\n    \"noroeste\": [\"Cuenca Arroyo Mart铆n-Carnaval\", \"Cuenca Arroyo Pereyra\"],\n    \"central\": [\"Cuenca Arroyo del Gato\"],\n    \"sudoeste\": [\"Cuenca A掳 Maldonado\", \"Cuenca R铆o Samboromb贸n\"],\n    \"sudeste\": [\"Cuenca Arroyo El Pescado\"],\n}\n\n\nScaleBar.set_size(\"xs\")\n\n\n# =============================================================================\n# DATA LOADING AND PREPROCESSING\n# =============================================================================\n\nresponse = requests.get(RENABAP_URL)\nrenabap = gpd.read_file(StringIO(response.text))\nrenabap_pba = renabap[renabap[\"provincia\"] == \"Buenos Aires\"]\nrenabap_pba = renabap_pba.to_crs(USE_CRS)\n\n\nif os.path.exists(PARTIDOS_PATH):\n    partidos = gpd.read_file(PARTIDOS_PATH)\nelse:\n    partidos = wfs_to_gdf(\n        wfs_url=PARTIDOS_WFS_URL,\n        layer_name=\"idera:Departamento\",\n        srs=\"EPSG:5347\",\n    )\n\n    partidos.to_file(PARTIDOS_PATH, driver=\"GeoJSON\")\n\npartidos = partidos.to_crs(USE_CRS)\nla_plata = partidos[partidos[\"fna\"] == \"Partido de La Plata\"]\n\n# Obtener la geometr铆a principal\nmain_geom = la_plata.geometry.iloc[0]\n\n# Si es un MultiPolygon, mantener solo el pol铆gono m谩s grande (el partido principal)\n# Esto elimina la peque帽a isla que aparece en los datos\nif main_geom.geom_type == \"MultiPolygon\":\n    # Obtener todos los pol铆gonos y mantener el que tenga mayor 谩rea\n    largest_polygon = max(main_geom.geoms, key=lambda p: p.area)\n    la_plata = la_plata.copy()  # Create a copy to avoid SettingWithCopyWarning\n    la_plata.loc[la_plata.index[0], \"geometry\"] = largest_polygon\n\nla_plata_bbox = la_plata.geometry.iloc[0]\n\n\npeligro = gpd.read_file(PELIGRO_PATH)\npeligro = peligro.to_crs(USE_CRS)\npeligro = peligro[peligro[\"PELIGROSID\"] != \"baja\"]\n\npeligro_bounds = peligro.total_bounds\npeligro_bbox = box(*peligro_bounds)\n\npeligro_la_plata = peligro.clip(la_plata)\npeligro_clipped_3857 = peligro_la_plata.to_crs(WEB_MERCATOR_CRS)\n\n\nrenabap_pba_intersect = renabap_pba[\n    renabap_pba.geometry.intersects(la_plata_bbox)\n].copy()\n\n\nif os.path.exists(CUENCAS_PATH):\n    cuencas = gpd.read_file(CUENCAS_PATH)\nelse:\n    params = {\"where\": \"1=1\", \"outFields\": \"*\", \"f\": \"geojson\"}\n\n    cuencas_response = requests.get(CUENCAS_API_URL, params=params)\n    with open(CUENCAS_PATH, \"w\", encoding=\"utf-8\") as f:\n        f.write(cuencas_response.text)\n\n    cuencas = gpd.read_file(StringIO(cuencas_response.text))\n\ncuencas = cuencas.to_crs(USE_CRS)\ncuencas = cuencas.clip(la_plata)\n\n# Map watershed names to axes based on the EJE_MAPPING\ncuencas[\"eje\"] = (\n    cuencas[\"Cuenca\"]\n    .map(\n        {\n            cuenca: eje\n            for eje, cuencas_list in EJE_MAPPING.items()\n            for cuenca in cuencas_list\n        }\n    )\n    .fillna(\"otro\")\n)\n\n# Calculate total area of RENABAP settlements in hectares (POSGAR projection is in meters)\nrenabap_total_area_ha = (\n    renabap_pba_intersect.geometry.area.sum() / 10000\n)  # Convert m虏 to hectares\nla_plata_area_ha = la_plata.geometry.iloc[0].area / 10000\npercentage_coverage = (renabap_total_area_ha / la_plata_area_ha) * 100\n\n# Get common bounds for all maps\ncommon_bounds = la_plata.total_bounds\n\n# Intersect settlements with hazard zones\nsettlement_hazard = gpd.overlay(renabap_pba_intersect, peligro, how=\"intersection\")\n\nsettle_hazard_cuencas = gpd.overlay(\n    settlement_hazard, cuencas, how=\"intersection\", keep_geom_type=True\n)",
    "crumbs": [
      "<span class='chapter-number'>3</span> <span class='chapter-title'>RENABAP</span>"
    ]
  },
  {
    "objectID": "renabap.html#fuentes-de-datos",
    "href": "renabap.html#fuentes-de-datos",
    "title": "3 RENABAP",
    "section": "3.3 Fuentes de datos",
    "text": "3.3 Fuentes de datos\n\n3.3.1 RENABAP\nEl Registro Nacional de Barrios Populares (RENABAP) es coordinado por la Subsecretar铆a de Integraci贸n Socio Urbana y sistematiza la informaci贸n sobre villas y asentamientos informales en Argentina. El registro incluye estimaciones de poblaci贸n, delimitaciones geogr谩ficas y datos sociodemogr谩ficos obtenidos a trav茅s de relevamientos territoriales realizados desde 2016 por equipos conformados por organizaciones sociales y vecinos de los barrios.\nEste relevamiento de Viviendas Familiares se realiza mediante encuestas domiciliarias en los barrios populares registrados. La metodolog铆a combina trabajo territorial con herramientas digitales como aplicaciones m贸viles de geolocalizaci贸n, escaneo de DNI, grabaci贸n de encuestas y cartograf铆a editable. Cada pol铆gono barrial se subdivide en manzanas, lotes y edificiones, y se releva una ficha por cada vivienda habitada. Los datos son validados con organismos oficiales (RENAPER, ANSES) y sometidos a control de calidad para garantizar su precisi贸n. Por otro lado, las estimaciones poblacionales para la versi贸n 2023 fueron calculadas multiplicando la cantidad de viviendas registradas en el RENABAP por el promedio de personas por vivienda y el promedio de hogares por vivienda, seg煤n los datos del Censo Nacional de Hogares Poblaci贸n y Vivienda INDEC 2010 correspondiente a cada barrio. Esto limita significativamente la precisi贸n de los datos demogr谩ficos en el contexto de procesos de transformaci贸n urbana, ya que los asentamientos informales han experimentado cambios sustanciales desde 2010. Las limitaciones cr铆ticas de estos datos se analizan en detalle en la secci贸n correspondiente de este estudio.\nM谩s informaci贸n sobre el RENABAP est谩 disponible en el Observatorio de Barrios Populares. Los datos fueron obtenidos a trav茅s del Mapa de Barrios Populares y est谩n disponibles para descarga como GeoJSON.\n\n\n3.3.2 Peligro de inundaci贸n\nLos datos de peligro de inundaci贸n utilizados en este an谩lisis fueron desarrollados por la Facultad de Ingenier铆a de la Universidad Nacional de La Plata como parte del Plan de Reducci贸n del Riesgo por Inundaciones en la Regi贸n de La Plata (Romanazzi et al. 2019). El modelo digital de elevaci贸n fue actualizado en 2023 para capturar mejor los patrones de drenaje y la topograf铆a urbana de la ciudad (Etulain et al. en prensa). La informaci贸n fue generada mediante la aplicaci贸n del modelo hidrol贸gico-hidr谩ulico bidimensional FLO-2D, que permiti贸 simular la din谩mica de inundaci贸n de todas las cuencas del partido de La Plata para distintos escenarios de eventos pluviom茅tricos extremos. El modelo calcula las principales variables hidr谩ulicas (altura del agua, velocidad y caudal) a lo largo del tiempo, y a partir de estos resultados se generaron los mapas de peligrosidad que combinan el efecto de la profundidad con la velocidad de la corriente, ofreciendo un indicador m谩s completo que los mapas tradicionales de m谩ximas profundidades.\n\n\n3.3.3 Google-Microsoft-OSM Open Buildings\nLos datos de Google-Microsoft-OSM Open Buildings (VIDA 2023) representan una forma m谩s precisa de evaluar d贸nde se ubican los asentamientos humanos. Este conjunto de datos combina Googles V3 Open Buildings, Microsofts GlobalMLFootprints, y OpenStreetMap building footprints, conteniendo m谩s de 2.7 mil millones de huellas de edificios. Estos datos han sido aplicados a evaluaciones de riesgo de inundaci贸n por empresas globales de riesgo financiero como ICE, demostrando su utilidad para mapear la exposici贸n clim谩tica a nivel de huella de edificio individual. Sin embargo, en ausencia de informaci贸n sobre si los edificios son residenciales o tienen otros usos, y sin datos sobre el n煤mero total de unidades en el edificio y habitantes por edificio, solo podemos obtener estimaciones proporcionales aproximadas de d贸nde se ubican las personas, sin tener una comprensi贸n precisa de qui茅n vive realmente all铆 y cu谩ntas personas.\n\n\nMostrar c贸digo\nif os.path.exists(BUILDINGS_PATH):\n    buildings = gpd.read_parquet(BUILDINGS_PATH)\nelse:\n    buildings = fetch_buildings(la_plata.buffer(500))\n\n\nla_plata_buffered = la_plata_bbox.buffer(500)\nbuildings_proj = buildings.to_crs(USE_CRS)\nbuildings_proj = buildings_proj[buildings_proj.geometry.intersects(la_plata_buffered)]",
    "crumbs": [
      "<span class='chapter-number'>3</span> <span class='chapter-title'>RENABAP</span>"
    ]
  },
  {
    "objectID": "renabap.html#contexto",
    "href": "renabap.html#contexto",
    "title": "3 RENABAP",
    "section": "3.4 Contexto",
    "text": "3.4 Contexto\n\n\nMostrar c贸digo\n# Calcular variables para el contexto\ntotal_barrios = int(len(renabap_pba_intersect))\ntotal_familias = int(renabap_pba_intersect[\"familias_aproximadas\"].sum())\narea_barrios_ha = int(renabap_total_area_ha)\nporcentaje_cobertura = float(round(percentage_coverage, 1))\n\n# Calcular barrios que intersectan con zonas de peligro\nbarrios_with_peligro = gpd.sjoin(\n    renabap_pba_intersect, peligro_la_plata, how=\"inner\", predicate=\"intersects\"\n)\n\n# Contar barrios por nivel de peligro\nbarrios_peligro_alta = int(\n    len(\n        barrios_with_peligro[barrios_with_peligro[\"PELIGROSID\"] == \"alta\"][\n            \"id_renabap\"\n        ].unique()\n    )\n)\nbarrios_peligro_media = int(\n    len(\n        barrios_with_peligro[barrios_with_peligro[\"PELIGROSID\"] == \"media\"][\n            \"id_renabap\"\n        ].unique()\n    )\n)\n\n# Contar barrios por tipo de peligro (sin duplicados)\nbarrios_peligro_summary = (\n    barrios_with_peligro.groupby(\"id_renabap\")[\"PELIGROSID\"]\n    .agg([\"nunique\", \"unique\"])\n    .reset_index()\n)\nbarrios_peligro_summary[\"tiene_alta\"] = barrios_peligro_summary[\"unique\"].apply(\n    lambda x: \"alta\" in x\n)\nbarrios_peligro_summary[\"tiene_media\"] = barrios_peligro_summary[\"unique\"].apply(\n    lambda x: \"media\" in x\n)\n\n# Contar barrios por categor铆a\nbarrios_solo_alta = int(\n    (\n        barrios_peligro_summary[\"tiene_alta\"] & ~barrios_peligro_summary[\"tiene_media\"]\n    ).sum()\n)\nbarrios_solo_media = int(\n    (\n        barrios_peligro_summary[\"tiene_media\"] & ~barrios_peligro_summary[\"tiene_alta\"]\n    ).sum()\n)\nbarrios_ambos_peligros = int(\n    (\n        barrios_peligro_summary[\"tiene_alta\"] & barrios_peligro_summary[\"tiene_media\"]\n    ).sum()\n)\n\n# Total de barrios que intersectan con cualquier nivel de peligro (sin duplicados)\nbarrios_total_peligro = int(len(barrios_with_peligro[\"id_renabap\"].unique()))\n\n# Obtener total de edificiones en La Plata\ntotal_buildings_la_plata = len(buildings_proj)\n\n# Obtener todas las edificiones que intersectan con los barrios (corregir warning de deprecaci贸n)\nbuildings_in_barrios = buildings_proj[\n    buildings_proj.geometry.intersects(renabap_pba_intersect.union_all())\n]\ntotal_buildings_in_barrios = len(buildings_in_barrios)\n\nviviendas_faltantes = (\n    total_buildings_in_barrios - 30753\n)  # 30753 es el n煤mero oficial de RENABAP\n\n# Calcular porcentaje de edificiones en barrios\nbuildings_percentage = float(\n    round((total_buildings_in_barrios / total_buildings_la_plata) * 100, 1)\n)\n\n\n# Helper function to format numbers with commas\ndef format_number(num):\n    return f\"{num:,}\"\n\n\n# Calcular 谩rea para cada tipo de peligro en hect谩reas\npeligro_areas = (\n    peligro_la_plata.groupby(\"PELIGROSID\")[\"geometry\"]\n    .apply(\n        lambda x: x.area.sum() / 10000  # Convertir m虏 a hect谩reas\n    )\n    .reset_index()\n)\npeligro_areas.columns = [\"tipo_peligro\", \"area_ha\"]\n\n# Calcular porcentajes\npeligro_areas[\"porcentaje\"] = (peligro_areas[\"area_ha\"] / la_plata_area_ha) * 100\n\n# Variables para cada nivel de peligro (convertir a float Python nativo)\npeligro_alta_ha = float(\n    round(peligro_areas[peligro_areas[\"tipo_peligro\"] == \"alta\"][\"area_ha\"].iloc[0], 1)\n)\npeligro_alta_pct = float(\n    round(\n        peligro_areas[peligro_areas[\"tipo_peligro\"] == \"alta\"][\"porcentaje\"].iloc[0], 1\n    )\n)\npeligro_media_ha = float(\n    round(peligro_areas[peligro_areas[\"tipo_peligro\"] == \"media\"][\"area_ha\"].iloc[0], 1)\n)\npeligro_media_pct = float(\n    round(\n        peligro_areas[peligro_areas[\"tipo_peligro\"] == \"media\"][\"porcentaje\"].iloc[0], 1\n    )\n)\n\n# rea total cubierta por zonas de peligro (convertir a float Python nativo)\narea_total_peligro_ha = float(round(peligro_areas[\"area_ha\"].sum(), 1))\nporcentaje_total_peligro = float(round(peligro_areas[\"porcentaje\"].sum(), 1))\n\n\nSeg煤n los datos oficiales de RENABAP, hay un total de 33,888 familias y 30,753 edificios en 166 barrios populares en el Partido de La Plata. Sin embargo, estos datos fueron creados bas谩ndose en proyecciones del Censo Argentino de 2010 hacia 2023. Nuestro an谩lisis de datos de huellas de edificios encuentra un total de 72,328 edificios en barrios populares en La Plata, representando aproximadamente 41,575 edificios adicionales que no est谩n contabilizados en los datos oficiales.\nEl territorio total del Partido de La Plata incluye 4,202 hect谩reas de peligro alto (4.7% del partido) y 19,515 hect谩reas de peligro medio (21.8% del partido). Respecto a la exposici贸n de los barrios populares a peligros de inundaci贸n, se encontr贸 que 124 barrios (74.7% del total) intersectan con zonas de peligro. Espec铆ficamente, 1 barrios intersectan 煤nicamente con zonas de peligro alto, 46 barrios intersectan 煤nicamente con zonas de peligro medio, y 77 barrios presentan tanto peligro alto como medio dentro de sus l铆mites.\n\nMostrar c贸digo\nfig1, ax1 = create_consistent_map(\n    \"Asentamientos RENABAP en La Plata\", crs=USE_CRS, boundary_gdf=la_plata, bounds=common_bounds\n)\n\nrenabap_pba_intersect_3857 = renabap_pba_intersect.to_crs(WEB_MERCATOR_CRS)\n\nrenabap_pba_intersect_3857.plot(\n    ax=ax1, facecolor=\"none\", edgecolor=\"black\", linewidth=0.5, legend=False, zorder=10\n)\n\nplt.tight_layout()\nplt.show()\n\n\n\n# Reorder the categories so they map correctly to plasma colormap\npeligro_clipped_3857[\"PELIGROSID_ordered\"] = pd.Categorical(\n    peligro_clipped_3857[\"PELIGROSID\"],\n    categories=[\"media\", \"alta\"],\n    ordered=True,\n)\n\n\nfig2, ax2 = create_consistent_map(\n    \"Zonas de Peligro en La Plata\", crs=USE_CRS, boundary_gdf=la_plata, bounds=common_bounds\n)\n\n\ncolor_map = peligro_clipped_3857[\"PELIGROSID\"].map(PELIGROSIDAD_COLORS)\n\npeligro_clipped_3857.plot(\n    ax=ax2,\n    color=color_map,\n    alpha=0.75,\n    zorder=5,\n)\n\nax2.legend(handles=PELIGROSIDAD_LEGEND, loc=\"lower right\")\n\nplt.tight_layout()\nplt.show()\n\n\nfig3, ax3 = create_consistent_map(\n    \"Huellas de edificios\", crs=USE_CRS, boundary_gdf=la_plata, bounds=common_bounds\n)\n\nbuildings_3857 = buildings_proj.to_crs(WEB_MERCATOR_CRS)\n\nbuildings_3857.plot(ax=ax3, facecolor=\"grey\", edgecolor=\"none\", alpha=0.7)\n\nplt.tight_layout()\nplt.show()\n\n\n\n\n\n\n\n\n\n\n\n\n(a) Asentamientos RENABAP en La Plata\n\n\n\n\n\n\n\n\n\n\n\n(b) Zonas de Peligro en La Plata\n\n\n\n\n\n\n\n\n\n\n\n(c) Huellas de edificios\n\n\n\n\n\n\n\nFigure3.1: Fuentes de datos para an谩lisis de exposici贸n",
    "crumbs": [
      "<span class='chapter-number'>3</span> <span class='chapter-title'>RENABAP</span>"
    ]
  },
  {
    "objectID": "renabap.html#metodolog铆a",
    "href": "renabap.html#metodolog铆a",
    "title": "3 RENABAP",
    "section": "3.5 Metodolog铆a",
    "text": "3.5 Metodolog铆a\nEn versiones anteriores de este an谩lisis, el trabajo se realiz贸 mediante una interpolaci贸n areal simple del porcentaje de superposici贸n de cada 谩rea de peligro de inundaci贸n con los asentamientos informales. Este enfoque presenta dos problemas fundamentales que este estudio busca abordar.\nEl primer problema es que la interpolaci贸n areal es inherentemente imprecisa, ya que asume lo que se conoce como el problema de la unidad areal modificable y presupone que la poblaci贸n se distribuye uniformemente en el espacio. Estudios confirman que cuando se asume distribuci贸n uniforme de poblaci贸n en 谩reas extensas (como datos de censo a nivel de secci贸n), las estimaciones de exposici贸n a inundaciones son inexactas, requiriendo datos de mayor resoluci贸n que no asuman distribuci贸n uniforme (Smith et al. 2019). La poblaci贸n, de hecho, no se distribuye uniformemente en el espacio; frecuentemente los edificios se agrupan ya sea alej谩ndose de las zonas de peligro de inundaci贸n o concentr谩ndose en zonas de alto peligro de inundaci贸n. Por tanto, es fundamental comprender con estimaciones m谩s precisas d贸nde vive realmente la gente.\nEl segundo problema radica en que los propios datos del RENABAP, seg煤n nuestro an谩lisis aqu铆 presentado, parecen contar dram谩ticamente de forma incorrecta, frecuentemente por un factor de dos o m谩s, el n煤mero de familias que aparentemente viven en un asentamiento informal bas谩ndose en el n煤mero de edificiones. Esto probablemente se debe a errores de proyecci贸n acumulados a lo largo del tiempo y a la dificultad de mantener actualizados los datos de asentamientos informales.\nEsta es una de las grandes ventajas de las huellas de edificios globales derivadas de sat茅lite que han surgido en los 煤ltimos a帽os de Google-Microsoft-OSM, entre otros. Uno de los objetivos principales de este an谩lisis es demostrar que estos datos de huellas de edificios pueden utilizarse para estimar la exposici贸n de manera m谩s precisa, tanto en t茅rminos de precisi贸n metodol贸gica como en t茅rminos de mejora sobre conjuntos de datos nacionales existentes como el RENABAP.\nPor tanto, en este estudio utilizamos el n煤mero de edificios que intersectan con las diferentes zonas de peligro de inundaci贸n como medida de exposici贸n. Aunque los datos del RENABAP estiman aproximadamente 1.1 familias por edificio, medimos la exposici贸n en t茅rminos del n煤mero comparativo de edificios, lo cual es suficiente para demostrar las limitaciones del RENABAP y proporcionar estimaciones razonablemente buenas de exposici贸n.\nBas谩ndonos en conversaciones con planificadores acad茅micos y municipales, asumimos que la mayor铆a de edificios en asentamientos informales son residenciales de uno a dos pisos, creando una correspondencia estrecha entre n煤mero de edificios y familias. Esta suposici贸n es v谩lida para este contexto espec铆fico, aunque no aplicar铆a a asentamientos formales densos.\n\n\nMostrar c贸digo\n# Definir orden de prioridad de peligro y simplificar\nhazard_priority = {\"alta\": 2, \"media\": 1}\npeligro_simple = peligro_la_plata.dissolve(by=\"PELIGROSID\").reset_index()\n\n# Construir 铆ndices espaciales para operaciones m谩s r谩pidas\nbuildings_proj.sindex\nrenabap_pba_intersect.sindex\npeligro_simple.sindex\n\n# Filtrar edificios a solo aquellos que podr铆an intersectar con barrios\n# usando intersecci贸n de cajas delimitadoras primero (mucho m谩s r谩pido que intersecci贸n geom茅trica)\n# Crear una uni贸n de todas las cajas delimitadoras individuales de barrios\n\n\n# Obtener cajas delimitadoras individuales para cada barrio\nbarrio_boxes = []\nfor _, barrio in renabap_pba_intersect.iterrows():\n    bounds = barrio.geometry.bounds\n    barrio_boxes.append(box(bounds[0], bounds[1], bounds[2], bounds[3]))\n\n# Crear una uni贸n de todas las cajas delimitadoras de barrios\n\n\nbarrios_union = unary_union(barrio_boxes)\n\n# Filtrar edificios a solo aquellos que intersectan con cualquier caja delimitadora de barrio\nbuildings_candidates = buildings_proj[buildings_proj.geometry.intersects(barrios_union)]\n\n# Ahora hacer el join espacial en el dataset filtrado mucho m谩s peque帽o\nbuildings_with_barrios = gpd.sjoin(\n    buildings_candidates,\n    renabap_pba_intersect[\n        [\"id_renabap\", \"nombre_barrio\", \"familias_aproximadas\", \"geometry\"]\n    ],\n    how=\"inner\",\n    predicate=\"within\",\n)\n\nbuildings_with_barrios = buildings_with_barrios.drop(columns=[\"index_right\"]).copy()\n\n# Etapa 1: Obtener edificios que est谩n claramente dentro de zonas de peligro (r谩pido)\nbuildings_within_hazards = gpd.sjoin(\n    buildings_with_barrios,\n    peligro_simple[[\"PELIGROSID\", \"geometry\"]],\n    how=\"inner\",\n    predicate=\"within\",\n)\n\n# Etapa 2: Encontrar edificios que est谩n cerca de los l铆mites de peligro pero no dentro\n# Usar un peque帽o buffer alrededor de las zonas de peligro para encontrar casos l铆mite potenciales\nhazard_buffered = peligro_simple.copy()\nhazard_buffered[\"geometry\"] = peligro_simple.geometry.buffer(5)  # buffer de 5 metros\n\nbuildings_near_hazards = gpd.sjoin(\n    buildings_with_barrios,\n    hazard_buffered[[\"PELIGROSID\", \"geometry\"]],\n    how=\"inner\",\n    predicate=\"within\",\n)\n\n# Encontrar casos l铆mite (cerca de peligros pero no dentro de los peligros originales)\nwithin_ids = set(buildings_within_hazards.index)\nnear_ids = set(buildings_near_hazards.index)\nedge_case_ids = near_ids - within_ids\n\nbuildings_edge_cases = buildings_with_barrios.loc[list(edge_case_ids)]\n\n# Etapa 3: Usar intersects solo en los casos l铆mite\nbuildings_edge_cases_with_hazard = gpd.sjoin(\n    buildings_edge_cases,\n    peligro_simple[[\"PELIGROSID\", \"geometry\"]],\n    how=\"left\",\n    predicate=\"intersects\",\n)\n\n# Combinar resultados\nbuildings_with_peligro_barrio = pd.concat(\n    [buildings_within_hazards, buildings_edge_cases_with_hazard], ignore_index=True\n)\n\n\n# Resolver duplicados y contar\nbuildings_barrio_final = buildings_with_peligro_barrio.dropna(\n    subset=[\"PELIGROSID\"]\n).copy()\nbuildings_barrio_final.loc[:, \"prioridad\"] = buildings_barrio_final[\"PELIGROSID\"].map(\n    hazard_priority\n)\nbuildings_barrio_unique = buildings_barrio_final.sort_values(\n    \"prioridad\", ascending=False\n).drop_duplicates(subset=buildings_barrio_final.geometry.name, keep=\"first\")\n\n# Calcular exposici贸n por barrio\nedificios_por_barrio_peligro = (\n    buildings_barrio_unique.groupby([\"id_renabap\", \"PELIGROSID\"])\n    .size()\n    .reset_index(name=\"edificios_expuestos\")\n)\n\ntotal_edificios_barrio = (\n    buildings_with_barrios.groupby(\"id_renabap\")\n    .size()\n    .reset_index(name=\"total_edificios\")\n)\n\nexposure_barrio = edificios_por_barrio_peligro.merge(\n    total_edificios_barrio, on=\"id_renabap\"\n)\nexposure_barrio[\"proporcion\"] = (\n    exposure_barrio[\"edificios_expuestos\"] / exposure_barrio[\"total_edificios\"]\n)\n\nfamilias_barrio = renabap_pba_intersect[\n    [\"id_renabap\", \"nombre_barrio\", \"familias_aproximadas\"]\n].drop_duplicates()\nfinal_exposure_barrio = exposure_barrio.merge(familias_barrio, on=\"id_renabap\")\nfinal_exposure_barrio[\"fam_expuestas\"] = (\n    final_exposure_barrio[\"proporcion\"] * final_exposure_barrio[\"familias_aproximadas\"]\n)\n\nresultado_exposicion_barrio = final_exposure_barrio[\n    [\n        \"id_renabap\",\n        \"nombre_barrio\",\n        \"PELIGROSID\",\n        \"edificios_expuestos\",\n    ]\n].rename(columns={\"PELIGROSID\": \"peligrosidad\"})\n\n# === ANLISIS POR CUENCA ===\n# Usar edificios ya en barrios para an谩lisis de cuenca\nbuildings_in_settlements = buildings_with_barrios.copy()\n\n# Spatial joins para cuenca\nbuildings_with_cuenca = gpd.sjoin(\n    buildings_in_settlements,\n    cuencas[[\"Cuenca\", \"eje\", \"geometry\"]],\n    how=\"left\",\n    predicate=\"within\",\n)\nbuildings_with_cuenca = buildings_with_cuenca.drop(columns=[\"index_right\"]).copy()\n\nbuildings_with_peligro_cuenca = gpd.sjoin(\n    buildings_in_settlements,\n    peligro_simple[[\"PELIGROSID\", \"geometry\"]],\n    how=\"left\",\n    predicate=\"within\",\n)\n\n# Combinar y filtrar\nbuildings_cuenca_final = buildings_in_settlements.copy()\nbuildings_cuenca_final.loc[:, \"Cuenca\"] = buildings_with_cuenca[\"Cuenca\"]\nbuildings_cuenca_final.loc[:, \"eje\"] = buildings_with_cuenca[\"eje\"]\nbuildings_cuenca_final.loc[:, \"PELIGROSID\"] = buildings_with_peligro_cuenca[\n    \"PELIGROSID\"\n]\nbuildings_cuenca_final = buildings_cuenca_final.dropna(\n    subset=[\"Cuenca\", \"PELIGROSID\"]\n).copy()\n\n# Resolver duplicados y calcular exposici贸n por cuenca\nbuildings_cuenca_final.loc[:, \"prioridad\"] = buildings_cuenca_final[\"PELIGROSID\"].map(\n    hazard_priority\n)\nbuildings_cuenca_unique = buildings_cuenca_final.sort_values(\n    \"prioridad\", ascending=False\n).drop_duplicates(subset=buildings_cuenca_final.geometry.name, keep=\"first\")\n\nedificios_por_cuenca_peligro = (\n    buildings_cuenca_unique.groupby([\"Cuenca\", \"PELIGROSID\"])\n    .size()\n    .reset_index(name=\"edificios_expuestos\")\n)\n\ntotal_edificios_cuenca = (\n    buildings_with_cuenca.dropna(subset=[\"Cuenca\"])\n    .groupby(\"Cuenca\")\n    .size()\n    .reset_index(name=\"total_edificios\")\n)\n\nexposure_cuenca = edificios_por_cuenca_peligro.merge(\n    total_edificios_cuenca, on=\"Cuenca\"\n)\nexposure_cuenca[\"proporcion\"] = (\n    exposure_cuenca[\"edificios_expuestos\"] / exposure_cuenca[\"total_edificios\"]\n)\n\nfamilias_cuenca = (\n    settle_hazard_cuencas.drop_duplicates(\"id_renabap\")\n    .groupby(\"Cuenca\")[\"familias_aproximadas\"]\n    .sum()\n    .reset_index()\n)\n\nfinal_exposure_cuenca = exposure_cuenca.merge(familias_cuenca, on=\"Cuenca\")\nfinal_exposure_cuenca[\"fam_expuestas\"] = (\n    final_exposure_cuenca[\"proporcion\"] * final_exposure_cuenca[\"familias_aproximadas\"]\n)\n\nresultado_exposicion_cuenca = final_exposure_cuenca[\n    [\"Cuenca\", \"PELIGROSID\", \"edificios_expuestos\"]\n].rename(columns={\"PELIGROSID\": \"peligrosidad\"})\n\n# === ANLISIS POR EJE ===\n# Usar los edificios ya procesados con cuenca y peligro\nbuildings_eje_final = buildings_cuenca_final.dropna(subset=[\"eje\"]).copy()\n\n# Resolver duplicados por prioridad de peligro\nbuildings_eje_final.loc[:, \"prioridad\"] = buildings_eje_final[\"PELIGROSID\"].map(\n    hazard_priority\n)\nbuildings_eje_unique = buildings_eje_final.sort_values(\n    \"prioridad\", ascending=False\n).drop_duplicates(subset=buildings_eje_final.geometry.name, keep=\"first\")\n\n# Calcular exposici贸n por eje y peligrosidad\nedificios_por_eje_peligro = (\n    buildings_eje_unique.groupby([\"eje\", \"PELIGROSID\"])\n    .size()\n    .reset_index(name=\"edificios_expuestos\")\n)\n\ntotal_edificios_eje = (\n    buildings_with_cuenca.dropna(subset=[\"eje\"])\n    .groupby(\"eje\")\n    .size()\n    .reset_index(name=\"total_edificios\")\n)\n\nexposure_eje = edificios_por_eje_peligro.merge(total_edificios_eje, on=\"eje\")\nexposure_eje[\"proporcion\"] = (\n    exposure_eje[\"edificios_expuestos\"] / exposure_eje[\"total_edificios\"]\n)\n\nfamilias_por_eje = (\n    settle_hazard_cuencas.drop_duplicates(\"id_renabap\")\n    .groupby(\"eje\")[\"familias_aproximadas\"]\n    .sum()\n    .reset_index()\n)\n\nfinal_exposure_eje = exposure_eje.merge(familias_por_eje, on=\"eje\")\nfinal_exposure_eje[\"fam_expuestas\"] = (\n    final_exposure_eje[\"proporcion\"] * final_exposure_eje[\"familias_aproximadas\"]\n)\n\nresultado_exposicion_eje = final_exposure_eje[\n    [\"eje\", \"PELIGROSID\", \"edificios_expuestos\"]\n].rename(columns={\"PELIGROSID\": \"peligrosidad\"})\n\n\n\n3.5.1 Limitaciones de los datos del RENABAP\nLos datos del RENABAP presentan limitaciones importantes que justifican el uso de huellas de edificios como alternativa m谩s precisa. Los datos m谩s recientes del RENABAP de 2023 subestiman significativamente el n煤mero total de familias por asentamiento informal. Estos datos se basan en proyecciones derivadas del censo de 2010, lo que ha resultado en estimaciones considerablemente desactualizadas.\n\n\nMostrar c贸digo\n# =============================================================================\n# ANALYTICAL PROCESSING: RENABAP DATA VALIDATION\n# =============================================================================\n\n# Calcular familias estimadas basadas en edificios (1.1 familias por edificio)\nratio_fam_edif = (\n    buildings_with_barrios.groupby([\"id_renabap\", \"familias_aproximadas\"])\n    .size()\n    .reset_index(name=\"total_edificios\")\n)\n\nratio_fam_edif[\"familias_estimadas_edificios\"] = ratio_fam_edif[\"total_edificios\"] * 1.1\n# Calcular el error porcentual: (RENABAP - Edificios) / Edificios * 100\nratio_fam_edif[\"error_porcentual\"] = (\n    (\n        ratio_fam_edif[\"familias_aproximadas\"]\n        - ratio_fam_edif[\"familias_estimadas_edificios\"]\n    )\n    / ratio_fam_edif[\"familias_estimadas_edificios\"]\n) * 100\n\n# =============================================================================\n# GRAPHICS: RENABAP ERROR ANALYSIS\n# =============================================================================\n\n# Crear histograma\nplt.figure(figsize=(12, 6))\nplt.hist(\n    ratio_fam_edif[\"error_porcentual\"],\n    bins=30,\n    edgecolor=\"none\",\n    color=PELIGROSIDAD_COLORS[\"alta\"],\n)\n\n# Personalizar el gr谩fico\nplt.title(\n    \"Error de Estimaci贸n de RENABAP vs Estimaci贸n por Edificios\",\n    fontsize=16,\n    fontweight=\"bold\",\n)\nplt.xlabel(\"Error Porcentual (%)\", fontsize=12)\nplt.ylabel(\"Frecuencia (N煤mero de Barrios)\", fontsize=12)\n\n# Agregar l铆neas de referencia\nmean_error = ratio_fam_edif[\"error_porcentual\"].mean()\nmedian_error = ratio_fam_edif[\"error_porcentual\"].median()\n\n# Rango de personas no contabilizadas (3-5 personas por vivienda)\npersonas_min_faltantes = round(viviendas_faltantes * 3, -3)  # Round to nearest thousand\npersonas_max_faltantes = round(viviendas_faltantes * 5, -3)  # Round to nearest thousand\n\nplt.axvline(\n    mean_error,\n    color=\"black\",\n    linestyle=\"--\",\n    linewidth=2,\n    label=f\"Error promedio: {mean_error:.1f}%\",\n)\nplt.axvline(\n    median_error,\n    color=\"black\",\n    linestyle=\"dotted\",\n    linewidth=2,\n    label=f\"Error mediano: {median_error:.1f}%\",\n)\n\n\nplt.legend()\nplt.tight_layout()\nplt.show()\n\n\n\n\n\n\n\n\nFigure3.2: Distribuci贸n del error porcentual en las estimaciones del RENABAP comparado con estimaciones basadas en edificios\n\n\n\n\n\nNuestro an谩lisis comparativo entre los datos del RENABAP y el conteo de huellas de edificios revela que el RENABAP subestima el n煤mero de estructuras habitacionales en un promedio del 41%. A nivel agregado, esto se traduce en aproximadamente 41,575 viviendas faltantes que no est谩n contabilizadas en las estad铆sticas oficiales del RENABAP. Considerando un rango razonable de 3 a 5 personas por vivienda, esta subestimaci贸n representa entre 125,000 y 208,000 personas que podr铆an estar no contabilizadas en los asentamientos informales. Esta discrepancia masiva demuestra claramente las limitaciones cr铆ticas del RENABAP para la evaluaci贸n precisa de la exposici贸n a riesgos de inundaci贸n y la planificaci贸n de pol铆ticas p煤blicas.\nTambi茅n podemos examinar im谩genes satelitales de un asentamiento informal de muestra con las huellas de edificios superpuestas para tener una idea de la veracidad de los datos. Aqu铆 est谩 un barrio llamado Los Pinos, en el cual mapeamos la extensi贸n del RENABAP del barrio y las huellas de los edificios dentro de 茅l. Las estimaciones del RENABAP dicen que este asentamiento informal tiene solo 72 familias. Nuestros datos cuentan 519 edificios. Si usamos la estimaci贸n del RENABAP de aproximadamente 1.1 familias por edificio, que es lo que calculan en sus datos originales, estamos hablando de un total de 570 familias, que es casi ocho veces m谩s de lo que los datos del RENABAP contabilizan.\n\n\nMostrar c贸digo\n# Filtrar para obtener solo el barrio con id_renabap 5688\nbarrio_5688 = renabap_pba_intersect[renabap_pba_intersect[\"id_renabap\"] == 5688].copy()\nif len(barrio_5688) == 0:\n    print(\"No se encontr贸 el barrio con id_renabap 5688\")\nelse:\n    # Obtener edificios en este barrio\n    buildings_5688 = buildings_with_barrios[\n        buildings_with_barrios[\"id_renabap\"] == 5688\n    ].copy()\n    # Convertir a Web Mercator\n    barrio_5688_3857 = barrio_5688.to_crs(WEB_MERCATOR_CRS)\n    buildings_5688_3857 = buildings_5688.to_crs(WEB_MERCATOR_CRS)\n    # Crear el mapa\n    fig, ax = plt.subplots(figsize=DEFAULT_FIGSIZE)\n    # Configurar l铆mites basados en el barrio\n    bounds = barrio_5688_3857.total_bounds\n    margin = 50  # metros\n    ax.set_xlim(bounds[0] - margin, bounds[2] + margin)\n    ax.set_ylim(bounds[1] - margin, bounds[3] + margin)\n    # Agregar basemap de contextily\n    cx.add_basemap(ax, crs=WEB_MERCATOR_CRS, source=cx.providers.Esri.WorldImagery)\n    # Plot de edificios con contorno naranja (sin fill)\n    buildings_5688_3857.plot(\n        ax=ax, facecolor=\"none\", edgecolor=PELIGROSIDAD_COLORS[\"media\"], linewidth=1\n    )\n    # Plot del l铆mite del barrio con estilo consistente\n    barrio_5688_3857.plot(\n        ax=ax,\n        facecolor=\"none\",\n        edgecolor=\"white\",  # White for satellite imagery visibility\n        linewidth=3,\n        linestyle=\"--\",\n        zorder=10,\n    )\n\n    ScaleBar.set_size(\"md\")\n\n    scale_bar(\n        ax=ax,\n        location=\"upper left\",\n        style=\"ticks\",\n        bar={\n            \"projection\": \"axis\",\n            \"minor_type\": \"none\",\n            \"tickcolors\": \"white\",\n            \"basecolors\": \"white\",\n        },\n        labels={\"style\": \"first_last\", \"textcolors\": [\"white\"], \"stroke_width\": 0},\n        units={\"label\": \"m\", \"textcolor\": \"white\", \"stroke_width\": 0},\n    )\n\n    north_arrow(\n        ax,\n        location=\"upper right\",\n        scale=0.3,  # Small size\n        rotation={\"degrees\": 0},\n        base={\"facecolor\": \"none\", \"edgecolor\": \"white\", \"linewidth\": 1},\n        fancy=True,\n        shadow=True,\n        label=False,  # Hide the \"N\" text\n    )\n\n    # Limpiar el mapa\n    barrio_nombre = barrio_5688[\"nombre_barrio\"].iloc[0]\n    familias_renabap = int(barrio_5688[\"familias_aproximadas\"].iloc[0])\n    total_edificios = len(buildings_5688)\n\n    # T铆tulo principal usando suptitle\n    fig.suptitle(\n        f\"Barrio {barrio_nombre} - L铆mites y edificiones\",\n        fontsize=16,\n        fontweight=\"bold\",\n        y=0.98,\n    )\n\n    # Subt铆tulo usando title\n    ax.set_title(\n        f\"RENABAP: {familias_renabap} familias | Edificios detectados: {total_edificios}\",\n        fontsize=12,\n        style=\"italic\",\n        pad=30,\n    )\n    ax.set_xticks([])\n    ax.set_yticks([])\n    ax.set_xlabel(\"\")\n    ax.set_ylabel(\"\")\n    ax.spines[\"top\"].set_visible(False)\n    ax.spines[\"right\"].set_visible(False)\n    ax.spines[\"bottom\"].set_visible(False)\n    ax.spines[\"left\"].set_visible(False)\n    # Agregar leyenda simple\n    legend_elements = [\n        plt.Line2D([0], [0], color=\"white\", linewidth=3, label=\"L铆mite del barrio\"),\n        plt.Line2D(\n            [0],\n            [0],\n            color=PELIGROSIDAD_COLORS[\"alta\"],\n            linewidth=1,\n            label=\"edificiones\",\n        ),\n    ]\n    ax.legend(handles=legend_elements, loc=\"lower right\", bbox_to_anchor=(1.0, 0.02))\n    plt.tight_layout()\n    plt.show()\n\n\n\n\n\n\n\n\nFigure3.3: Ejemplo de discrepancia en los datos del RENABAP: el barrio Los Pinos con l铆mites oficiales y edificiones detectadas\n\n\n\n\n\nAl examinar otros ejemplos de barrios con las mayores discrepancias entre las huellas de edificios detectadas y los datos oficiales del RENABAP, observamos que frecuentemente encontramos 贸rdenes de magnitud m谩s edificios que familias estimadas, representando miles de familias no contabilizadas.\n\nMostrar c贸digo\n# IDs de los barrios a visualizar\nbarrio_ids = [4577, 65, 6541, 17]\n\nfor i, barrio_id in enumerate(barrio_ids):\n    # Filtrar para obtener el barrio espec铆fico\n    barrio_data = renabap_pba_intersect[\n        renabap_pba_intersect[\"id_renabap\"] == barrio_id\n    ].copy()\n\n    if len(barrio_data) == 0:\n        print(f\"No se encontr贸 el barrio con id_renabap {barrio_id}\")\n        continue\n\n    # Obtener edificios en este barrio\n    buildings_data = buildings_with_barrios[\n        buildings_with_barrios[\"id_renabap\"] == barrio_id\n    ].copy()\n\n    # Convertir a Web Mercator\n    barrio_3857 = barrio_data.to_crs(WEB_MERCATOR_CRS)\n    buildings_3857 = buildings_data.to_crs(WEB_MERCATOR_CRS)\n\n    # Crear el mapa individual\n    fig, ax = plt.subplots(figsize=DEFAULT_FIGSIZE)\n\n    # Configurar l铆mites basados en el barrio\n    bounds = barrio_3857.total_bounds\n    margin = 50  # metros\n    ax.set_xlim(bounds[0] - margin, bounds[2] + margin)\n    ax.set_ylim(bounds[1] - margin, bounds[3] + margin)\n\n    # Agregar basemap de contextily (sin atribuci贸n)\n    cx.add_basemap(\n        ax, crs=WEB_MERCATOR_CRS, source=cx.providers.Esri.WorldImagery, attribution=\"\"\n    )\n\n    # Plot de edificios con contorno naranja (sin fill)\n    buildings_3857.plot(\n        ax=ax, facecolor=\"none\", edgecolor=PELIGROSIDAD_COLORS[\"media\"], linewidth=1\n    )\n\n    # Plot del l铆mite del barrio con estilo consistente\n    barrio_3857.plot(\n        ax=ax,\n        facecolor=\"none\",\n        edgecolor=\"white\",\n        linewidth=3,\n        linestyle=\"--\",\n        zorder=10,\n    )\n\n    # Agregar escala\n    ScaleBar.set_size(\"md\")\n    scale_bar(\n        ax=ax,\n        location=\"upper left\",\n        style=\"ticks\",\n        bar={\n            \"projection\": \"axis\",\n            \"minor_type\": \"none\",\n            \"tickcolors\": \"white\",\n            \"basecolors\": \"white\",\n        },\n        labels={\"style\": \"first_last\", \"textcolors\": [\"white\"], \"stroke_width\": 0},\n        units={\"label\": \"m\", \"textcolor\": \"white\", \"stroke_width\": 0},\n    )\n\n    # Agregar flecha del norte\n    north_arrow(\n        ax,\n        location=\"upper right\",\n        scale=0.3,\n        rotation={\"degrees\": 0},\n        base={\"facecolor\": \"none\", \"edgecolor\": \"white\", \"linewidth\": 1},\n        fancy=True,\n        shadow=True,\n        label=False,\n    )\n\n    # Obtener informaci贸n del barrio\n    barrio_nombre = barrio_data[\"nombre_barrio\"].iloc[0]\n    familias_renabap = int(barrio_data[\"familias_aproximadas\"].iloc[0])\n    total_edificios = len(buildings_data)\n\n    # T铆tulo principal usando suptitle\n    fig.suptitle(f\"Barrio {barrio_nombre}\", fontsize=16, fontweight=\"bold\", y=0.98)\n\n    # Subt铆tulo usando title\n    ax.set_title(\n        f\"RENABAP: {familias_renabap} familias | Edificios detectados: {total_edificios}\",\n        fontsize=12,\n        style=\"italic\",\n        pad=30,\n    )\n\n    # Limpiar el mapa\n    ax.set_xticks([])\n    ax.set_yticks([])\n    ax.set_xlabel(\"\")\n    ax.set_ylabel(\"\")\n    ax.spines[\"top\"].set_visible(False)\n    ax.spines[\"right\"].set_visible(False)\n    ax.spines[\"bottom\"].set_visible(False)\n    ax.spines[\"left\"].set_visible(False)\n\n    plt.tight_layout()\n    plt.show()\n\n\n\n\n\n\n\n\n\n\n\n\n(a)\n\n\n\n\n\n\n\n\n\n\n\n(b)\n\n\n\n\n\n\n\n\n\n\n\n\n\n(c)\n\n\n\n\n\n\n\n\n\n\n\n(d)\n\n\n\n\n\n\n\nFigure3.4",
    "crumbs": [
      "<span class='chapter-number'>3</span> <span class='chapter-title'>RENABAP</span>"
    ]
  },
  {
    "objectID": "renabap.html#procesamiento-y-resultados",
    "href": "renabap.html#procesamiento-y-resultados",
    "title": "3 RENABAP",
    "section": "3.6 Procesamiento y resultados",
    "text": "3.6 Procesamiento y resultados\n\n\nMostrar c贸digo\n# =============================================================================\n# EXPOSICIN POR BARRIO\n# =============================================================================\n# Preparar datos - solo alta y media\nexposure_data = resultado_exposicion_barrio[\n    resultado_exposicion_barrio[\"peligrosidad\"].isin([\"alta\", \"media\"])\n].copy()\n\n# Merge con geometr铆as para obtener centroides\nexposure_gdf = exposure_data.merge(\n    renabap_pba_intersect[[\"id_renabap\", \"geometry\"]], on=\"id_renabap\"\n)\nexposure_gdf = gpd.GeoDataFrame(exposure_gdf, geometry=\"geometry\", crs=USE_CRS)\n\n# Convertir a Web Mercator para el plotting\nexposure_gdf_3857 = exposure_gdf.to_crs(WEB_MERCATOR_CRS)\nla_plata_3857 = la_plata.to_crs(WEB_MERCATOR_CRS)\n\n\n# Filtrar exposici贸n alta y media por nombre de barrio (excluyendo \"Sin Nombre\")\nbarrios_alta_data = (\n    resultado_exposicion_barrio[\n        (resultado_exposicion_barrio[\"peligrosidad\"] == \"alta\")\n        & (resultado_exposicion_barrio[\"nombre_barrio\"] != \"Sin Nombre\")\n    ]\n    .groupby(\"nombre_barrio\")[\"edificios_expuestos\"]\n    .sum()\n    .reset_index()\n    .sort_values(\"edificios_expuestos\", ascending=False)\n    .head(10)\n)\n\nbarrios_media_data = (\n    resultado_exposicion_barrio[\n        (resultado_exposicion_barrio[\"peligrosidad\"] == \"media\")\n        & (resultado_exposicion_barrio[\"nombre_barrio\"] != \"Sin Nombre\")\n    ]\n    .groupby(\"nombre_barrio\")[\"edificios_expuestos\"]\n    .sum()\n    .reset_index()\n)\n\n# Merge para tener ambos niveles\nbarrios_combined = barrios_alta_data.merge(\n    barrios_media_data, on=\"nombre_barrio\", how=\"left\", suffixes=(\"_alta\", \"_media\")\n)\nbarrios_combined[\"edificios_expuestos_media\"] = barrios_combined[\n    \"edificios_expuestos_media\"\n].fillna(0)\n\n# =============================================================================\n# EXPOSICIN POR CUENCA Y EJE\n# =============================================================================\n\ncuenca_alta_data = (\n    resultado_exposicion_cuenca[resultado_exposicion_cuenca[\"peligrosidad\"] == \"alta\"]\n    .groupby(\"Cuenca\")[\"edificios_expuestos\"]\n    .sum()\n    .reset_index()\n    .sort_values(\"edificios_expuestos\", ascending=False)\n)\n\ncuenca_media_data = (\n    resultado_exposicion_cuenca[resultado_exposicion_cuenca[\"peligrosidad\"] == \"media\"]\n    .groupby(\"Cuenca\")[\"edificios_expuestos\"]\n    .sum()\n    .reset_index()\n)\n\n# Merge para tener ambos niveles\ncuenca_combined = cuenca_alta_data.merge(\n    cuenca_media_data, on=\"Cuenca\", how=\"left\", suffixes=(\"_alta\", \"_media\")\n)\ncuenca_combined[\"edificios_expuestos_media\"] = cuenca_combined[\n    \"edificios_expuestos_media\"\n].fillna(0)\n\n# === GRFICO DE EJES ===\n# Filtrar exposici贸n alta y media por eje\neje_alta_data = (\n    resultado_exposicion_eje[resultado_exposicion_eje[\"peligrosidad\"] == \"alta\"]\n    .groupby(\"eje\")[\"edificios_expuestos\"]\n    .sum()\n    .reset_index()\n    .sort_values(\"edificios_expuestos\", ascending=False)\n)\n\neje_media_data = (\n    resultado_exposicion_eje[resultado_exposicion_eje[\"peligrosidad\"] == \"media\"]\n    .groupby(\"eje\")[\"edificios_expuestos\"]\n    .sum()\n    .reset_index()\n)\n\n# Merge para tener ambos niveles\neje_combined = eje_alta_data.merge(\n    eje_media_data, on=\"eje\", how=\"left\", suffixes=(\"_alta\", \"_media\")\n)\neje_combined[\"edificios_expuestos_media\"] = eje_combined[\n    \"edificios_expuestos_media\"\n].fillna(0)\n\n# =============================================================================\n# CALCULAR ESTADSTICAS RESUMEN PARA EL TEXTO\n# =============================================================================\n\n# Totales de edificios expuestos (sin duplicados)\n# Los edificios que intersectan con ambos peligros ya est谩n resueltos por prioridad en buildings_barrio_unique\ntotal_buildings_high_hazard = int(buildings_barrio_unique[buildings_barrio_unique[\"PELIGROSID\"] == \"alta\"].shape[0])\ntotal_buildings_medium_hazard = int(buildings_barrio_unique[buildings_barrio_unique[\"PELIGROSID\"] == \"media\"].shape[0])\ntotal_buildings_exposed = total_buildings_high_hazard + total_buildings_medium_hazard\n\n# Total de edificios en barrios\ntotal_buildings_in_barrios = len(buildings_with_barrios)\npercentage_exposed = float(round((total_buildings_exposed / total_buildings_in_barrios) * 100, 1))\n\n# Top 5 barrios por exposici贸n a peligro alto\ntop_5_barrios_alta = (\n    resultado_exposicion_barrio[\n        (resultado_exposicion_barrio[\"peligrosidad\"] == \"alta\") & \n        (resultado_exposicion_barrio[\"nombre_barrio\"] != \"Sin Nombre\")\n    ]\n    .groupby(\"nombre_barrio\")[\"edificios_expuestos\"]\n    .sum()\n    .reset_index()\n    .sort_values(\"edificios_expuestos\", ascending=False)\n    .head(5)\n    .merge(\n        buildings_with_barrios.groupby(\"nombre_barrio\").size().reset_index(name=\"total_edificios_barrio\"),\n        on=\"nombre_barrio\"\n    )\n    .assign(porcentaje=lambda x: (x[\"edificios_expuestos\"] / x[\"total_edificios_barrio\"] * 100).round(1).astype(float))\n)\n\n# Top 5 cuencas con desglose por peligrosidad usando pivot\ntop_5_cuencas = (\n    resultado_exposicion_cuenca\n    .pivot_table(\n        index=\"Cuenca\", \n        columns=\"peligrosidad\", \n        values=\"edificios_expuestos\", \n        aggfunc=\"sum\", \n        fill_value=0\n    )\n    .reset_index()\n    .assign(edificios_expuestos_total=lambda x: x[\"alta\"] + x[\"media\"])\n    .rename(columns={\"alta\": \"edificios_expuestos_alta\", \"media\": \"edificios_expuestos_media\"})\n    .sort_values(\"edificios_expuestos_total\", ascending=False)\n    .head(5)\n)\n\n\nEn los barrios populares de La Plata se identifican 17,014 edificiones expuestas a peligros de inundaci贸n, lo que representa el 23.9% del total de edificiones en asentamientos informales. De estas, 6,112 edificiones se encuentran en zonas de peligro alto y 10,902 en zonas de peligro medio.\nLa exposici贸n se concentra principalmente en los alrededores del casco urbano de La Plata, con una distribuci贸n caracter铆stica donde pocos barrios presentan exposici贸n muy alta, seguidos por un grupo de exposici贸n media. Villa Montoro lidera con 669 edificiones expuestas a peligro alto (21.7% del barrio), seguido por La Esperanza con 440 edificiones (16.3%), Las Palmeras con 417 (33.7%), Toba con 335 (67.7%), y La Isla con 320 edificiones (96.4%).\nA nivel de cuencas hidrogr谩ficas, Cuenca Arroyo del Gato concentra la mayor exposici贸n con 7943 edificiones expuestas (2662 a peligro alto y 5281 a peligro medio), principalmente debido a la presencia de Villa Montoro y otros asentamientos importantes. Le sigue Cuenca A掳 Maldonado con 3316 edificiones (1000 alta, 2316 media) y Cuenca Arroyo Mart铆n-Carnaval con 1096 edificiones (368 alta, 728 media). Esta concentraci贸n refleja tanto la densidad de asentamientos informales como su ubicaci贸n en zonas de alto riesgo hidrol贸gico.\n\n3.6.1 Exposici贸n por barrio\n\n\nMostrar c贸digo\n# Crear el mapa\nfig, ax = plt.subplots(figsize=DEFAULT_FIGSIZE)\n\n# Configurar l铆mites\nbounds = la_plata_3857.total_bounds\nmargin = 2000  # metros\nax.set_xlim(bounds[0] - margin, bounds[2] + margin)\nax.set_ylim(bounds[1] - margin, bounds[3] + margin)\n\n# Agregar basemap de contextily\ncx.add_basemap(\n    ax, crs=WEB_MERCATOR_CRS, source=cx.providers.CartoDB.PositronNoLabels, alpha=0.7\n)\n\n# Plot de puntos con jitter\nnp.random.seed(42)\nplotting_order = [\"media\", \"alta\"]\n\nfor peligrosidad in plotting_order:\n    level_data = exposure_gdf_3857[exposure_gdf_3857[\"peligrosidad\"] == peligrosidad]\n    for _, row in level_data.iterrows():\n        centroid = row[\"geometry\"].centroid\n        jitter_x = np.random.uniform(-200, 200)\n        jitter_y = np.random.uniform(-200, 200)\n        x_pos = centroid.x + jitter_x\n        y_pos = centroid.y + jitter_y\n        color = PELIGROSIDAD_COLORS[row[\"peligrosidad\"]]\n        size = max(10, row[\"edificios_expuestos\"] * 0.5 + 15)\n        ax.scatter(\n            x_pos,\n            y_pos,\n            s=size,\n            color=color,\n            alpha=0.9,\n            edgecolors=\"white\",\n            linewidth=1.0,\n        )\n\n# Leyenda de peligrosidad\nlegend_elements_peligro = [\n    plt.Line2D(\n        [0],\n        [0],\n        marker=\"o\",\n        color=\"w\",\n        markerfacecolor=PELIGROSIDAD_COLORS[\"alta\"],\n        markersize=8,\n        label=\"Alta\",\n    ),\n    plt.Line2D(\n        [0],\n        [0],\n        marker=\"o\",\n        color=\"w\",\n        markerfacecolor=PELIGROSIDAD_COLORS[\"media\"],\n        markersize=8,\n        label=\"Media\",\n    ),\n]\n\n# Leyenda de tama帽o\nbuilding_values = [100, 500, 1000]\nlegend_elements_size = []\nfor val in building_values:\n    size = max(10, val * 0.5 + 15)\n    legend_elements_size.append(\n        plt.Line2D(\n            [0],\n            [0],\n            marker=\"o\",\n            color=\"w\",\n            markerfacecolor=\"gray\",\n            markersize=np.sqrt(size / 10),\n            label=f\"{val} edificios\",\n        )\n    )\n\n# Crear leyendas lado a lado en bottom right\nlegend1 = ax.legend(\n    handles=legend_elements_peligro,\n    title=\"Nivel de peligrosidad\",\n    loc=\"lower right\",\n    bbox_to_anchor=(0.85, 0),\n)\nax.add_artist(legend1)\n\nlegend2 = ax.legend(\n    handles=legend_elements_size,\n    title=\"Edificios expuestos\",\n    loc=\"lower right\",\n    bbox_to_anchor=(1.0, 0),\n)\n\n\nadd_boundary_outline(ax, la_plata_3857)\n\n# Agregar escala y flecha norte para consistencia\nadd_scale_bar_and_north_arrow(ax)\n\n# Limpiar el mapa - quitar bordes, ticks, etc.\nax.set_title(\n    \"Exposici贸n de Barrios Populares por Nivel de Peligrosidad\",\n    fontsize=14,\n    fontweight=\"bold\",\n    pad=20,\n)\nax.set_axis_off()\n\nplt.tight_layout()\nplt.show()\n\n\n\n# Crear el gr谩fico de barras\nfig, ax = plt.subplots(figsize=(12, 8))\nx = np.arange(len(barrios_combined))\nwidth = 0.35\n\nbars1 = ax.bar(\n    x - width / 2,\n    barrios_combined[\"edificios_expuestos_alta\"],\n    width,\n    label=\"Peligro Alto\",\n    color=PELIGROSIDAD_COLORS[\"alta\"],\n)\nbars2 = ax.bar(\n    x + width / 2,\n    barrios_combined[\"edificios_expuestos_media\"],\n    width,\n    label=\"Peligro Medio\",\n    color=PELIGROSIDAD_COLORS[\"media\"],\n)\n\nax.set_xlabel(\"Barrios\", fontsize=12)\nax.set_ylabel(\"Edificios Expuestos\", fontsize=12)\nax.set_title(\"Top 10 Barrios por Edificios Expuestos\", fontsize=14, fontweight=\"bold\")\nax.set_xticks(x)\nax.set_xticklabels(barrios_combined[\"nombre_barrio\"], rotation=45, ha=\"right\")\nax.legend(loc=\"upper right\")\n\n# Agregar valores en las barras\nfor bar in bars1:\n    height = bar.get_height()\n    if height &gt; 0:\n        ax.text(\n            bar.get_x() + bar.get_width() / 2.0,\n            height + 5,\n            f\"{int(height)}\",\n            ha=\"center\",\n            va=\"bottom\",\n            fontsize=10,\n        )\n\nfor bar in bars2:\n    height = bar.get_height()\n    if height &gt; 0:\n        ax.text(\n            bar.get_x() + bar.get_width() / 2.0,\n            height + 5,\n            f\"{int(height)}\",\n            ha=\"center\",\n            va=\"bottom\",\n            fontsize=10,\n        )\n\nplt.tight_layout()\nplt.show()\n\nshow(resultado_exposicion_barrio)\n\n\n\n\n\n\n\n\n\n\n\n(a) Mapa de exposici贸n de barrios populares por nivel de peligrosidad de inundaci贸n\n\n\n\n\n\n\n\n\n\n\n\n(b)\n\n\n\n\n\n\n\n\n\n    \n    \n    \n        \n        \n        \n        \n        \n        \n        \n        \n    \n    \n   \n    \n      \n  \n        \n    \n    \n  \n        \n    \n    \n  \n        \n    \n      \n  \n        \n            \n                \n                \n            \n\n            \n                \n                \n            \n\n            \n                \n                \n            \n\n            \n                \n                \n            \n\n            \n                \n                \n            \n        \n    \n\n\n    Loading ITables v2.4.4 from the internet...\n    (need help?)\n    \n\n\n\n\n(c)\n\n\n\n\n\nFigure3.5\n\n\n\n\n\n\n3.6.2 Exposici贸n por cuenca y eje\n\nMostrar c贸digo\n# Crear gr谩fico de cuencas\nfig1, ax1 = plt.subplots(figsize=DEFAULT_FIGSIZE)\nx = np.arange(len(cuenca_combined))\nwidth = 0.35\n\nbars1 = ax1.bar(\n    x - width / 2,\n    cuenca_combined[\"edificios_expuestos_alta\"],\n    width,\n    label=\"Peligro Alto\",\n    color=PELIGROSIDAD_COLORS[\"alta\"],\n)\nbars2 = ax1.bar(\n    x + width / 2,\n    cuenca_combined[\"edificios_expuestos_media\"],\n    width,\n    label=\"Peligro Medio\",\n    color=PELIGROSIDAD_COLORS[\"media\"],\n)\n\nax1.set_xlabel(\"Cuencas\", fontsize=12)\nax1.set_ylabel(\"Edificios Expuestos\", fontsize=12)\nax1.set_title(\"Cuencas por edificiones Expuestas\", fontsize=14, fontweight=\"bold\")\nax1.set_xticks(x)\nax1.set_xticklabels(cuenca_combined[\"Cuenca\"], rotation=45, ha=\"right\")\nax1.legend(loc=\"upper right\")\n\n# Agregar valores en las barras\nfor bar in bars1:\n    height = bar.get_height()\n    if height &gt; 0:\n        ax1.text(\n            bar.get_x() + bar.get_width() / 2.0,\n            height + 20,\n            f\"{int(height)}\",\n            ha=\"center\",\n            va=\"bottom\",\n            fontsize=10,\n        )\n\nfor bar in bars2:\n    height = bar.get_height()\n    if height &gt; 0:\n        ax1.text(\n            bar.get_x() + bar.get_width() / 2.0,\n            height + 20,\n            f\"{int(height)}\",\n            ha=\"center\",\n            va=\"bottom\",\n            fontsize=10,\n        )\n\nplt.tight_layout()\nplt.show()\n\n\n\n# Crear gr谩fico de ejes\nfig2, ax2 = plt.subplots(figsize=DEFAULT_FIGSIZE)\nx = np.arange(len(eje_combined))\nwidth = 0.35\n\nbars1 = ax2.bar(\n    x - width / 2,\n    eje_combined[\"edificios_expuestos_alta\"],\n    width,\n    label=\"Peligro Alto\",\n    color=PELIGROSIDAD_COLORS[\"alta\"],\n)\nbars2 = ax2.bar(\n    x + width / 2,\n    eje_combined[\"edificios_expuestos_media\"],\n    width,\n    label=\"Peligro Medio\",\n    color=PELIGROSIDAD_COLORS[\"media\"],\n)\n\nax2.set_xlabel(\"Ejes\", fontsize=12)\nax2.set_ylabel(\"Edificios Expuestos\", fontsize=12)\nax2.set_title(\"Ejes por edificiones Expuestas\", fontsize=14, fontweight=\"bold\")\nax2.set_xticks(x)\nax2.set_xticklabels(eje_combined[\"eje\"], rotation=45, ha=\"right\")\nax2.legend(loc=\"upper right\")\n\n# Agregar valores en las barras\nfor bar in bars1:\n    height = bar.get_height()\n    if height &gt; 0:\n        ax2.text(\n            bar.get_x() + bar.get_width() / 2.0,\n            height + 10,\n            f\"{int(height)}\",\n            ha=\"center\",\n            va=\"bottom\",\n            fontsize=10,\n        )\n\nfor bar in bars2:\n    height = bar.get_height()\n    if height &gt; 0:\n        ax2.text(\n            bar.get_x() + bar.get_width() / 2.0,\n            height + 10,\n            f\"{int(height)}\",\n            ha=\"center\",\n            va=\"bottom\",\n            fontsize=10,\n        )\n\nplt.tight_layout()\nplt.show()\n\n\n\n\n\n\n\n\n\n\n\n\n(a) Cuencas por edificiones expuestas\n\n\n\n\n\n\n\n\n\n\n\n(b) Ejes por edificiones expuestas\n\n\n\n\n\n\n\nFigure3.6: Exposici贸n por cuencas hidrogr谩ficas y ejes territoriales",
    "crumbs": [
      "<span class='chapter-number'>3</span> <span class='chapter-title'>RENABAP</span>"
    ]
  },
  {
    "objectID": "renabap.html#comparativa-de-periodos-de-retorno",
    "href": "renabap.html#comparativa-de-periodos-de-retorno",
    "title": "3 RENABAP",
    "section": "3.7 Comparativa de periodos de retorno",
    "text": "3.7 Comparativa de periodos de retorno\n\nMostrar c贸digo\n# =============================================================================\n# GRAPHICS: RETURN PERIOD COMPARISON\n# =============================================================================\n\n# Preparar datos de cuenca Maldonado para clipping\ncuenca_maldonado = cuencas[cuencas[\"Cuenca\"] == \"Cuenca A掳 Maldonado\"].copy()\n\n\n# Rutas de archivos\nr100_path = \"/home/nissim/Documents/dev/fulbright/ciut-riesgo/notebooks/data/raster verctorizados/Peligrosidad_R100_polig.shp\"\nr25_path = \"/home/nissim/Documents/dev/fulbright/ciut-riesgo/notebooks/data/raster verctorizados/Peligrosidad_R25_polig.shp\"\n\n# Color mapping para R100 y R25\ncolor_mapping = {\n    \"Medio\": PELIGROSIDAD_COLORS[\"media\"],\n    \"Alto\": PELIGROSIDAD_COLORS[\"alta\"],\n}\n\n# === MAPA PMP ===\npeligro_pmp_maldonado = gpd.clip(peligro_la_plata, cuenca_maldonado)\npeligro_pmp_maldonado = peligro_pmp_maldonado[\n    peligro_pmp_maldonado[\"PELIGROSID\"].isin([\"alta\", \"media\"])\n]\npeligro_pmp_maldonado_3857 = peligro_pmp_maldonado.to_crs(WEB_MERCATOR_CRS)\n\nfig1, ax1 = create_consistent_map(\n    \"PMP (Precipitaci贸n M谩xima Probable)\", crs=USE_CRS, boundary_gdf=cuenca_maldonado\n)\npeligro_pmp_maldonado_3857.plot(\n    ax=ax1,\n    color=peligro_pmp_maldonado_3857[\"PELIGROSID\"].map(PELIGROSIDAD_COLORS),\n    alpha=0.75,\n    zorder=5,\n)\nax1.legend(handles=PELIGROSIDAD_LEGEND, loc=\"lower right\")\nplt.tight_layout()\nplt.show()\n\n# === MAPA R100 ===\npelig_100_maldonado = gpd.read_file(r100_path).to_crs(USE_CRS)\npelig_100_maldonado = pelig_100_maldonado[\n    pelig_100_maldonado[\"peli\"].isin([\"Alto\", \"Medio\"])\n]\npelig_100_maldonado_clipped_3857 = gpd.clip(\n    pelig_100_maldonado, cuenca_maldonado\n).to_crs(WEB_MERCATOR_CRS)\n\nfig2, ax2 = create_consistent_map(\n    \"R100 (Per铆odo de retorno 100 a帽os)\", crs=USE_CRS, boundary_gdf=cuenca_maldonado\n)\npelig_100_maldonado_clipped_3857.plot(\n    ax=ax2,\n    color=pelig_100_maldonado_clipped_3857[\"peli\"].map(color_mapping),\n    alpha=0.75,\n    zorder=5,\n)\nax2.legend(handles=PELIGROSIDAD_LEGEND, loc=\"lower right\")\nplt.tight_layout()\nplt.show()\n\n# === MAPA R25 ===\npelig_25_maldonado = gpd.read_file(r25_path).to_crs(USE_CRS)\npelig_25_maldonado = pelig_25_maldonado[\n    pelig_25_maldonado[\"peli\"].isin([\"Alto\", \"Medio\"])\n]\npelig_25_maldonado_clipped_3857 = gpd.clip(pelig_25_maldonado, cuenca_maldonado).to_crs(\n    WEB_MERCATOR_CRS\n)\n\nfig3, ax3 = create_consistent_map(\n    \"R25 (Per铆odo de retorno 25 a帽os)\", crs=USE_CRS, boundary_gdf=cuenca_maldonado\n)\npelig_25_maldonado_clipped_3857.plot(\n    ax=ax3,\n    color=pelig_25_maldonado_clipped_3857[\"peli\"].map(color_mapping),\n    alpha=0.75,\n    zorder=5,\n)\nax3.legend(handles=PELIGROSIDAD_LEGEND, loc=\"lower right\")\nplt.tight_layout()\nplt.show()\n\n\n\n\n\n\n\n\n\n\n\n\n(a) PMP (Precipitaci贸n M谩xima Probable)\n\n\n\n\n\n\n\n\n\n\n\n(b) R100 (Per铆odo de retorno 100 a帽os)\n\n\n\n\n\n\n\n\n\n\n\n(c) R25 (Per铆odo de retorno 25 a帽os)\n\n\n\n\n\n\n\nFigure3.7: Escenarios de peligrosidad en Cuenca Maldonado\n\n\n\n\n\nMostrar c贸digo\n# =============================================================================\n# ANALYTICAL PROCESSING: RETURN PERIOD DATA\n# =============================================================================\n\n# Helper function para procesar datos de peligro\ndef process_hazard_data(file_path, buildings):\n    pelig_data = gpd.read_file(file_path).to_crs(USE_CRS)\n    pelig_filtered = pelig_data[pelig_data[\"peli\"].isin([\"Alto\", \"Medio\"])].copy()\n    pelig_simple = pelig_filtered.dissolve(by=\"peli\").reset_index()\n\n    buildings_with_peligro = gpd.sjoin(\n        buildings, pelig_simple[[\"peli\", \"geometry\"]], how=\"left\", predicate=\"within\"\n    )\n    buildings_exposed = buildings_with_peligro.dropna(subset=[\"peli\"]).copy()\n\n    hazard_priority = {\"Alto\": 3, \"Medio\": 2}\n    buildings_exposed.loc[:, \"prioridad\"] = buildings_exposed[\"peli\"].map(\n        hazard_priority\n    )\n    buildings_unique = buildings_exposed.sort_values(\n        \"prioridad\", ascending=False\n    ).drop_duplicates(subset=buildings_exposed.geometry.name, keep=\"first\")\n\n    exposicion = (\n        buildings_unique.groupby(\"peli\").size().reset_index(name=\"edificios_expuestos\")\n    )\n    result = {}\n    for _, row in exposicion.iterrows():\n        peligro_name = \"alta\" if row[\"peli\"] == \"Alto\" else \"media\"\n        result[peligro_name] = row[\"edificios_expuestos\"]\n    return result\n\n\nbuildings_maldonado = buildings_with_barrios.copy()\n\n# === DATOS DE LOS TRES ESCENARIOS ===\n# PMP\nmaldonado_pmp = resultado_exposicion_cuenca[\n    resultado_exposicion_cuenca[\"Cuenca\"] == \"Cuenca A掳 Maldonado\"\n].copy()\npmp_data = (\n    {\n        row[\"peligrosidad\"]: int(row[\"edificios_expuestos\"])\n        for _, row in maldonado_pmp.iterrows()\n    }\n    if len(maldonado_pmp) &gt; 0\n    else {}\n)\n\n# R25 y R100\nr25_data = process_hazard_data(r25_path, buildings_maldonado)\nr100_data = process_hazard_data(r100_path, buildings_maldonado)\n\n# =============================================================================\n# GRAPHICS: FINAL COMPARISON VISUALIZATION\n# =============================================================================\n\n# === VISUALIZACIN COMPARATIVA ===\nescenarios = [\"PMP\", \"R100\", \"R25\"]\nalta_values = [\n    pmp_data.get(\"alta\", 0),\n    r100_data.get(\"alta\", 0),\n    r25_data.get(\"alta\", 0),\n]\nmedia_values = [\n    pmp_data.get(\"media\", 0),\n    r100_data.get(\"media\", 0),\n    r25_data.get(\"media\", 0),\n]\n\nx = np.arange(len(escenarios))\nwidth = 0.35\n\nfig, ax = plt.subplots(figsize=(10, 6))\nbars1 = ax.bar(\n    x - width / 2,\n    alta_values,\n    width,\n    label=\"Peligro Alto\",\n    color=PELIGROSIDAD_COLORS[\"alta\"],\n)\nbars2 = ax.bar(\n    x + width / 2,\n    media_values,\n    width,\n    label=\"Peligro Medio\",\n    color=PELIGROSIDAD_COLORS[\"media\"],\n)\n\nax.set_xlabel(\"Escenario de Precipitaci贸n\", fontsize=12)\nax.set_ylabel(\"Edificios Expuestos\", fontsize=12)\nax.set_title(\n    \"Exposici贸n en Cuenca Maldonado por Escenario de Precipitaci贸n\",\n    fontsize=14,\n    fontweight=\"bold\",\n)\nax.set_xticks(x)\nax.set_xticklabels(escenarios)\nax.legend(loc=\"upper right\")\n\n\ndef add_value_labels(bars):\n    for bar in bars:\n        height = bar.get_height()\n        if height &gt; 0:\n            ax.text(\n                bar.get_x() + bar.get_width() / 2.0,\n                height + 20,\n                f\"{int(height)}\",\n                ha=\"center\",\n                va=\"bottom\",\n                fontsize=10,\n            )\n\n\nadd_value_labels(bars1)\nadd_value_labels(bars2)\nplt.tight_layout()\nplt.show()",
    "crumbs": [
      "<span class='chapter-number'>3</span> <span class='chapter-title'>RENABAP</span>"
    ]
  },
  {
    "objectID": "renabap.html#conclusiones",
    "href": "renabap.html#conclusiones",
    "title": "3 RENABAP",
    "section": "3.8 Conclusiones",
    "text": "3.8 Conclusiones\nLos datos de huellas de edificios nos permiten realizar evaluaciones significativamente m谩s precisas de la exposici贸n en asentamientos informales en todo el partido y revelan una subestimaci贸n cr铆tica en los datos oficiales. Este an谩lisis identifica aproximadamente 41,575 viviendas faltantes que no est谩n contabilizadas en los datos del RENABAP, lo que representa potencialmente entre 125,000 y 208,000 personas no contabilizadas en los asentamientos informales (usando un rango razonable de 3 a 5 personas por vivienda). Esta discrepancia tiene implicaciones profundas para la planificaci贸n de gesti贸n de riesgo y la asignaci贸n de recursos.\nEn los barrios populares de La Plata se identifican 17,014 edificiones expuestas a peligros de inundaci贸n, lo que representa el 23.9% del total de edificiones en asentamientos informales. De estas, 6,112 edificiones se encuentran en zonas de peligro alto y 10,902 en zonas de peligro medio. La exposici贸n se concentra principalmente en los alrededores del casco urbano de La Plata, con una distribuci贸n caracter铆stica donde pocos barrios presentan exposici贸n muy alta, seguidos por un grupo de exposici贸n media. Villa Montoro lidera con 669 edificiones expuestas a peligro alto (21.7% del barrio), seguido por La Esperanza con 440 edificiones (16.3%), Las Palmeras con 417 (33.7%), Toba con 335 (67.7%), y La Isla con 320 edificiones (96.4%). A nivel de cuencas hidrogr谩ficas, Cuenca Arroyo del Gato concentra la mayor exposici贸n con 7943 edificiones expuestas (2662 a peligro alto y 5281 a peligro medio), principalmente debido a la presencia de Villa Montoro y otros asentamientos importantes. Le sigue Cuenca A掳 Maldonado con 3316 edificiones (1000 alta, 2316 media) y Cuenca Arroyo Mart铆n-Carnaval con 1096 edificiones (368 alta, 728 media). Esta concentraci贸n refleja tanto la densidad de asentamientos informales como su ubicaci贸n en zonas de alto riesgo hidrol贸gico.\nAdem谩s, el an谩lisis comparativo de tasas de exposici贸n de edificios para la Cuenca Maldonado bajo diferentes per铆odos de retorno, incluyendo la precipitaci贸n m谩xima probable (PMP) utilizada en el resto del estudio versus per铆odos de retorno de 100 a帽os y 25 a帽os, revela que la elecci贸n del per铆odo de retorno genera diferencias significativas en las tasas de exposici贸n. Encontramos que bajo la PMP se exponen 贸rdenes de magnitud m谩s edificios que bajo los per铆odos de retorno de 25 y 100 a帽os, lo cual es fundamental considerar al determinar qu茅 谩reas priorizar para la reubicaci贸n de residentes en asentamientos informales.\nEste enfoque basado en edificios no solo proporciona estimaciones m谩s precisas y actualizadas que los m茅todos tradicionales de interpolaci贸n areal, sino que tambi茅n demuestra la necesidad urgente de actualizar los registros oficiales de asentamientos informales. Los datos globales de huellas de edificios representan una herramienta esencial para comprender la verdadera magnitud de la poblaci贸n en riesgo y para la planificaci贸n efectiva de pol铆ticas de reducci贸n de riesgo de inundaci贸n.\n\n\n\n\nEtulain, Juan Carlos, Jos茅 Luis Carner, Facundo Ortiz, and Esteban Lacunza. en prensa. Inundaciones y Resiliencia En Territorios Urbanos Fragmentados. Cuenca Del Arroyo Maldonado. La Plata, Argentina. In, edited by Juan Carlos Etulain. La Plata, Argentina: Editorial UNLP.\n\n\nRomanazzi, Pablo et al. 2019. Plan de Reducci贸n Del Riesgo Por Inundaciones En La Regi贸n de La Plata. Edited by Sebasti谩n Guerrini, Pablo Morosi, Eduardo Pablo Spinelli, and Josefina L贸pez MacKenzie. 1st ed. La Plata: Universidad Nacional de La Plata. Facultad de Ingenier铆a; Municipalidad de La Plata. https://sedici.unlp.edu.ar/bitstream/handle/10915/165109/Documento_completo.pdf-PDFA.pdf?sequence=1&isAllowed=y.\n\n\nSmith, A., P. D. Bates, O. Wing, et al. 2019. New Estimates of Flood Exposure in Developing Countries Using High-Resolution Population Data. Nature Communications 10: 1814. https://doi.org/10.1038/s41467-019-09282-y.\n\n\nVIDA. 2023. Google-Microsoft-OSM Open Buildings - Combined by VIDA. https://source.coop/repositories/vida/google-microsoft-osm-open-buildings/access.",
    "crumbs": [
      "<span class='chapter-number'>3</span> <span class='chapter-title'>RENABAP</span>"
    ]
  }
]